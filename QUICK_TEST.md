# ⚡ 快速测试指南

## 5分钟快速验证所有Bug修复

### 准备工作
1. 加载扩展到Chrome: `chrome://extensions/` → 加载已解压的扩展程序 → 选择 `dist/` 文件夹
2. 打开任意网页
3. 点击扩展图标打开侧边栏
4. 打开浏览器控制台 (F12)

---

## 测试1: 防止重复发送 (30秒)

```
1. 输入消息: "测试1"
2. 快速连续点击"发送"按钮 5次
3. 观察:
   ✅ 只发送1条消息
   ✅ 按钮在发送中禁用
   ✅ 控制台显示 "消息正在发送中"
```

**预期**: 不会重复发送消息

---

## 测试2: 对话切换取消请求 (1分钟)

```
1. 创建新对话（点击"+"）
2. 在对话1发送: "请写一篇长文章"
3. 等待AI开始回复（看到文字出现）
4. 立即点击对话列表，切换到对话2
5. 观察:
   ✅ 对话1的回复停止
   ✅ 对话2干净无残留
   ✅ 控制台显示 "取消正在进行的消息发送"
```

**预期**: 消息不会出现在错误对话中

---

## 测试3: DOM缓存检测变化 (2分钟)

```
1. 访问: https://react.dev
2. 发送消息: "总结页面"
3. 等待AI回复完成
4. 在React网站点击其他页面（URL可能不变）
5. 再次发送: "总结页面"
6. 观察控制台:
   ✅ 第一次: "提取XX个元素"
   ✅ 5秒内重复: "使用缓存"
   ✅ 页面切换: "检测到DOM变化，重新提取"
```

**预期**: SPA页面切换时正确检测DOM变化

---

## 测试4: 清除数据后重置 (1分钟)

```
1. 发送几条消息
2. 右键扩展图标 → 选项 / 设置
3. 找到"数据管理" → "清除所有数据"
4. 确认清除
5. 等待页面重载
6. 观察:
   ✅ 对话已清除
   ✅ 自动创建新对话
   ✅ 可以立即发送消息
   ✅ 没有"对话不存在"错误
```

**预期**: 清除后可以正常使用

---

## 压力测试: 综合场景 (2分钟)

```
1. 快速执行以下操作:
   - 发送消息
   - 切换对话
   - 创建新对话
   - 再发送消息
   - 快速切换对话
   - 重复3次

2. 观察:
   ✅ 没有消息错乱
   ✅ 没有错误提示
   ✅ 响应流畅
   ✅ 状态一致
```

**预期**: 所有操作正常，没有异常

---

## 性能检查

查看控制台性能日志:
```
[SidePanel] ✅ 初始化完成，耗时: XXX ms  → 应该 < 500ms
[Perf] 发送消息 - 完成，耗时: XXX ms    → 应该 < 100ms
[Extractor] ✅ 提取XX个元素，耗时: XX ms → 应该 < 100ms
```

---

## ✅ 通过标准

所有测试通过，说明Bug已成功修复！

如果有任何测试失败，请查看:
- `TEST_REPORT.md` - 完整测试报告
- `TESTING_GUIDE.md` - 详细测试指南
- `BUG_FIXES_SUMMARY.md` - 修复详情

---

**测试时间**: ~5-7分钟  
**难度**: ⭐ 简单  
**推荐频率**: 每次代码变更后

